<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Cork - Wine Cellar</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="theme-color" content="#722F37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="The Cork">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="styles.css?v=42">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Outfit:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 168 298" xmlns="http://www.w3.org/2000/svg">
                        <path d="M71.00,297.34 C41.70,294.49 26.11,289.76 16.33,280.74 C10.06,274.95 9.55,272.44 11.45,256.75 C12.33,249.46 13.26,241.47 13.50,239.00 C14.84,225.76 20.39,172.42 22.55,152.11 C23.92,139.24 24.92,128.64 24.77,128.55 C24.62,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.72,121.59 151.00,125.76 L145.50,128.74 L145.69,138.59 C145.79,144.01 146.59,154.08 147.46,160.97 C149.90,180.36 153.95,215.41 155.03,226.50 C155.56,232.00 156.93,244.06 158.06,253.29 C160.48,272.96 160.18,274.73 153.38,281.01 C147.66,286.28 138.93,290.37 126.92,293.41 C113.49,296.81 85.68,298.77 71.00,297.34 Z M109.00,288.99 C128.79,285.94 142.86,280.86 148.96,274.54 L152.43,270.96 L150.68,254.73 C149.71,245.80 147.61,227.70 146.00,214.50 C139.77,163.30 136.97,138.23 136.74,131.50 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C16.99,120.04 41.06,127.35 71.50,128.67 C87.48,129.36 91.66,131.19 87.28,135.57 C85.77,137.09 84.04,137.22 72.48,136.66 C65.29,136.32 54.02,135.09 47.45,133.93 C40.88,132.77 34.83,131.75 34.00,131.66 C32.97,131.55 32.41,132.59 32.22,135.00 C32.07,136.93 31.06,146.15 29.97,155.50 C28.88,164.85 27.31,179.93 26.47,189.00 C25.63,198.07 24.26,211.35 23.43,218.50 C22.59,225.65 21.25,238.25 20.45,246.50 C19.65,254.75 18.73,263.52 18.40,266.00 C17.92,269.70 18.21,271.00 20.03,273.32 C25.02,279.65 37.31,284.65 56.00,287.97 C67.95,290.10 98.04,290.67 109.00,288.99 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                    </svg>
                    <div class="logo-text">
                        <span class="logo-title">The Cork</span>
                        <span class="logo-subtitle">Wine Inventory</span>
                    </div>
                </div>
                <button id="archiveBtn" class="header-icon-btn" aria-label="Archief">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M21 8v13H3V8"/>
                        <path d="M1 3h22v5H1z"/>
                        <path d="M10 12h4"/>
                    </svg>
                </button>
                <button id="settingsBtn" class="header-icon-btn" aria-label="Settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </button>
                <div class="header-stats">
                    <span id="totalBottles">0</span> bottles
                </div>
                <div id="syncStatus" class="sync-status">
                    <span class="status-local">üíæ Lokaal</span>
                </div>
            </div>
        </header>

        <!-- Login Screen -->
        <div id="loginScreen" class="login-screen">
            <div class="login-content">
                <svg class="login-logo" viewBox="0 0 168 298" xmlns="http://www.w3.org/2000/svg">
                    <path d="M71.00,297.34 C41.70,294.49 26.11,289.76 16.33,280.74 C10.06,274.95 9.55,272.44 11.45,256.75 C12.33,249.46 13.26,241.47 13.50,239.00 C14.84,225.76 20.39,172.42 22.55,152.11 C23.92,139.24 24.92,128.64 24.77,128.55 C24.62,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.72,121.59 151.00,125.76 L145.50,128.74 L145.69,138.59 C145.79,144.01 146.59,154.08 147.46,160.97 C149.90,180.36 153.95,215.41 155.03,226.50 C155.56,232.00 156.93,244.06 158.06,253.29 C160.48,272.96 160.18,274.73 153.38,281.01 C147.66,286.28 138.93,290.37 126.92,293.41 C113.49,296.81 85.68,298.77 71.00,297.34 Z M109.00,288.99 C128.79,285.94 142.86,280.86 148.96,274.54 L152.43,270.96 L150.68,254.73 C149.71,245.80 147.61,227.70 146.00,214.50 C139.77,163.30 136.97,138.23 136.74,131.50 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C16.99,120.04 41.06,127.35 71.50,128.67 C87.48,129.36 91.66,131.19 87.28,135.57 C85.77,137.09 84.04,137.22 72.48,136.66 C65.29,136.32 54.02,135.09 47.45,133.93 C40.88,132.77 34.83,131.75 34.00,131.66 C32.97,131.55 32.41,132.59 32.22,135.00 C32.07,136.93 31.06,146.15 29.97,155.50 C28.88,164.85 27.31,179.93 26.47,189.00 C25.63,198.07 24.26,211.35 23.43,218.50 C22.59,225.65 21.25,238.25 20.45,246.50 C19.65,254.75 18.73,263.52 18.40,266.00 C17.92,269.70 18.21,271.00 20.03,273.32 C25.02,279.65 37.31,284.65 56.00,287.97 C67.95,290.10 98.04,290.67 109.00,288.99 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                </svg>
                <h1>Welkom bij The Cork</h1>
                <p>Log in om je wijnkelder te beheren en te synchroniseren tussen al je apparaten.</p>

                <!-- Email/Password Form -->
                <form id="emailAuthForm" class="email-auth-form">
                    <div class="form-group">
                        <input type="email" id="loginEmail" class="auth-input" placeholder="E-mailadres" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" class="auth-input" placeholder="Wachtwoord" required minlength="6">
                    </div>
                    <button type="submit" id="emailSignInBtn" class="email-sign-in-btn">
                        Inloggen
                    </button>
                </form>

                <button type="button" id="toggleRegisterBtn" class="toggle-auth-btn">
                    Nog geen account? <span>Registreren</span>
                </button>

                <button type="button" id="forgotPasswordBtn" class="forgot-password-btn">
                    Wachtwoord vergeten?
                </button>

                <div class="auth-divider">
                    <span>of</span>
                </div>

                <button id="loginGoogleBtn" class="google-sign-in-btn large">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Inloggen met Google
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content hidden">
            <!-- Sticky Filter Bar -->
            <div id="filterBar" class="filter-bar hidden">
                <!-- Search with inline filter/sort icons -->
                <div class="search-input-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search wine, producer, grape...">
                    <button id="clearSearch" class="clear-search-btn hidden">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <button id="filterBtn" class="search-action-btn" title="Filter">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
                        </svg>
                    </button>
                    <button id="sortBtn" class="search-action-btn" title="Sorteer">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="6" x2="21" y2="6"/>
                            <line x1="6" y1="12" x2="18" y2="12"/>
                            <line x1="9" y1="18" x2="15" y2="18"/>
                        </svg>
                    </button>
                </div>

                <!-- Sort Dropdown -->
                <div id="sortDropdown" class="control-dropdown hidden">
                    <button class="control-option active" data-sort="recent">Recent toegevoegd</button>
                    <button class="control-option" data-sort="drinkability">Op dronk</button>
                    <button class="control-option" data-sort="price_asc">Prijs (laag ‚Üí hoog)</button>
                    <button class="control-option" data-sort="price_desc">Prijs (hoog ‚Üí laag)</button>
                </div>

                <!-- Filter Dropdown -->
                <div id="filterDropdown" class="control-dropdown hidden">
                    <div class="filter-section">
                        <h4>Type</h4>
                        <button class="control-option active" data-filter="type" data-value="all">Alles</button>
                        <button class="control-option" data-filter="type" data-value="red">Red</button>
                        <button class="control-option" data-filter="type" data-value="white">White</button>
                        <button class="control-option" data-filter="type" data-value="ros√©">Ros√©</button>
                        <button class="control-option" data-filter="type" data-value="sparkling">Sparkling</button>
                        <button class="control-option" data-filter="type" data-value="dessert">Dessert</button>
                    </div>
                    <div class="filter-section">
                        <h4>Dronk status</h4>
                        <button class="control-option" data-filter="drinkability" data-value="all">Alles</button>
                        <button class="control-option" data-filter="drinkability" data-value="perfect">Op dronk</button>
                        <button class="control-option" data-filter="drinkability" data-value="soon">Binnenkort</button>
                    </div>
                    <div class="filter-section hidden" id="grapeFilterSection"></div>
                </div>

                <!-- Search Results -->
                <div id="searchResults" class="search-results hidden">
                    <span id="searchResultCount">0 results</span>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state">
                <div class="empty-illustration">
                    <svg class="empty-logo" viewBox="0 0 168 298" xmlns="http://www.w3.org/2000/svg">
                        <path d="M71.00,297.34 C41.70,294.49 26.11,289.76 16.33,280.74 C10.06,274.95 9.55,272.44 11.45,256.75 C12.33,249.46 13.26,241.47 13.50,239.00 C14.84,225.76 20.39,172.42 22.55,152.11 C23.92,139.24 24.92,128.64 24.77,128.55 C24.62,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.72,121.59 151.00,125.76 L145.50,128.74 L145.69,138.59 C145.79,144.01 146.59,154.08 147.46,160.97 C149.90,180.36 153.95,215.41 155.03,226.50 C155.56,232.00 156.93,244.06 158.06,253.29 C160.48,272.96 160.18,274.73 153.38,281.01 C147.66,286.28 138.93,290.37 126.92,293.41 C113.49,296.81 85.68,298.77 71.00,297.34 Z M109.00,288.99 C128.79,285.94 142.86,280.86 148.96,274.54 L152.43,270.96 L150.68,254.73 C149.71,245.80 147.61,227.70 146.00,214.50 C139.77,163.30 136.97,138.23 136.74,131.50 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C16.99,120.04 41.06,127.35 71.50,128.67 C87.48,129.36 91.66,131.19 87.28,135.57 C85.77,137.09 84.04,137.22 72.48,136.66 C65.29,136.32 54.02,135.09 47.45,133.93 C40.88,132.77 34.83,131.75 34.00,131.66 C32.97,131.55 32.41,132.59 32.22,135.00 C32.07,136.93 31.06,146.15 29.97,155.50 C28.88,164.85 27.31,179.93 26.47,189.00 C25.63,198.07 24.26,211.35 23.43,218.50 C22.59,225.65 21.25,238.25 20.45,246.50 C19.65,254.75 18.73,263.52 18.40,266.00 C17.92,269.70 18.21,271.00 20.03,273.32 C25.02,279.65 37.31,284.65 56.00,287.97 C67.95,290.10 98.04,290.67 109.00,288.99 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                    </svg>
                </div>
                <h2>Your cellar is empty</h2>
                <p>Tap + to add your first bottle</p>
            </div>

            <!-- Wine List -->
            <div id="wineList" class="wine-list"></div>
        </main>

        <!-- Add Button -->
        <button id="addWineBtn" class="fab" aria-label="Add wine">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content settings-modal">
                <div class="modal-header">
                    <h2>Instellingen</h2>
                    <button class="close-btn" data-close="settingsModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section" id="authSection">
                        <h3>Account & Cloud Sync</h3>
                        <p class="settings-description">
                            Je wijnkelder wordt gesynchroniseerd met je Google account.<br>
                            Al je wijnen zijn beschikbaar op al je apparaten.
                        </p>

                        <div class="api-key-status" id="userInfo" style="display: none; color: var(--system-green);">
                        </div>

                        <button id="googleSignInBtn" class="google-sign-in-btn">
                            <svg viewBox="0 0 24 24" width="18" height="18">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            Inloggen met Google
                        </button>

                        <button id="signOutBtn" class="clear-key-btn" style="display: none;">
                            Uitloggen
                        </button>

                        <div class="api-key-status" id="firebaseSyncStatus" style="margin-top: 12px;">
                            <span class="status-disconnected">Niet ingelogd</span>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>AI Wijnherkenning</h3>
                        <div class="api-key-status" id="aiStatus">
                            <span class="status-connected">‚úì Automatische labelherkenning actief</span>
                        </div>
                        <p class="settings-description">
                            Maak een foto van een wijnetiket en de app herkent automatisch de wijn,
                            druivensoort, regio, en geeft proefnotities.
                        </p>
                    </div>

                    <div class="settings-section">
                        <h3>Over The Cork</h3>
                        <p class="settings-description">
                            The Cork gebruikt GPT-4 Vision om wijnetiketten te lezen en automatisch
                            wijnkenmerken, proefnotities en prijsinformatie op te halen.<br><br>
                            Versie 2.0 - Nu met cloud sync en archief functie.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Wine Modal -->
        <div id="addModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Add Wine</h2>
                    <button class="close-btn" data-close="addModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Image Upload Section -->
                    <div class="upload-section">
                        <div id="imagePreview" class="image-preview">
                            <div class="upload-placeholder">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M21 15l-5-5L5 21"/>
                                </svg>
                                <span>Tap to add photo</span>
                            </div>
                            <img id="previewImg" src="" alt="Wine label preview">
                        </div>
                        <div class="upload-buttons">
                            <button id="cameraBtn" class="upload-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                    <circle cx="12" cy="13" r="4"/>
                                </svg>
                                Camera
                            </button>
                            <button id="galleryBtn" class="upload-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M21 15l-5-5L5 21"/>
                                </svg>
                                Gallery
                            </button>
                        </div>
                        <input type="file" id="cameraInput" accept="image/*" capture="environment" hidden>
                        <input type="file" id="galleryInput" accept="image/*" hidden>
                    </div>

                    <!-- Scanning Indicator -->
                    <div id="scanningIndicator" class="scanning-indicator hidden">
                        <div class="scanning-animation">
                            <div class="scan-line"></div>
                        </div>
                        <p>Reading label...</p>
                    </div>

                    <!-- Wine Form -->
                    <form id="wineForm" class="wine-form">
                        <div class="form-group">
                            <label for="wineName">Wine Name *</label>
                            <input type="text" id="wineName" required placeholder="e.g., Grand Vin 2015">
                        </div>

                        <div class="form-group">
                            <label for="wineProducer">Producer / House</label>
                            <input type="text" id="wineProducer" placeholder="e.g., Ch√¢teau Margaux">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="wineType">Type</label>
                                <select id="wineType">
                                    <option value="red">Red</option>
                                    <option value="white">White</option>
                                    <option value="ros√©">Ros√©</option>
                                    <option value="sparkling">Sparkling</option>
                                    <option value="dessert">Dessert</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="wineYear">Year</label>
                                <input type="number" id="wineYear" min="1900" max="2030" placeholder="2020">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="wineRegion">Region</label>
                            <input type="text" id="wineRegion" placeholder="e.g., Bordeaux, France">
                        </div>

                        <div class="form-group">
                            <label for="wineGrape">Grape Variety</label>
                            <input type="text" id="wineGrape" placeholder="e.g., Cabernet Sauvignon">
                        </div>

                        <div class="characteristics-section">
                            <h3>Characteristics</h3>

                            <div class="characteristic-slider">
                                <label>
                                    <span>Boldness</span>
                                    <span class="char-value" id="boldnessValue">3</span>
                                </label>
                                <input type="range" id="boldness" min="1" max="5" value="3">
                                <div class="slider-labels">
                                    <span>Light</span>
                                    <span>Bold</span>
                                </div>
                            </div>

                            <div class="characteristic-slider">
                                <label>
                                    <span>Tannins</span>
                                    <span class="char-value" id="tanninsValue">3</span>
                                </label>
                                <input type="range" id="tannins" min="1" max="5" value="3">
                                <div class="slider-labels">
                                    <span>Smooth</span>
                                    <span>Tannic</span>
                                </div>
                            </div>

                            <div class="characteristic-slider">
                                <label>
                                    <span>Acidity</span>
                                    <span class="char-value" id="acidityValue">3</span>
                                </label>
                                <input type="range" id="acidity" min="1" max="5" value="3">
                                <div class="slider-labels">
                                    <span>Soft</span>
                                    <span>Acidic</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="winePrice">Prijs (‚Ç¨)</label>
                                <input type="number" id="winePrice" min="0" step="0.01" placeholder="25.00">
                            </div>
                            <div class="form-group">
                                <label for="wineQuantity">Aantal</label>
                                <div class="quantity-control">
                                    <button type="button" class="qty-btn" data-action="decrease">‚àí</button>
                                    <input type="number" id="wineQuantity" min="1" value="1">
                                    <button type="button" class="qty-btn" data-action="increase">+</button>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="wineStore">Winkel</label>
                            <input type="text" id="wineStore" placeholder="bijv. Albert Heijn, Gall & Gall">
                        </div>

                        <div class="form-group">
                            <label>Beste Drinkmoment</label>
                            <div class="drink-window-row">
                                <input type="number" id="drinkFrom" min="1900" max="2100" placeholder="Van">
                                <span class="drink-window-separator">‚Äî</span>
                                <input type="number" id="drinkUntil" min="1900" max="2100" placeholder="Tot">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="wineNotes">Tasting Notes</label>
                            <textarea id="wineNotes" rows="3" placeholder="Your personal notes..."></textarea>
                        </div>

                        <button type="submit" class="submit-btn">Add to Cellar</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Wine Detail Modal -->
        <div id="detailModal" class="modal">
            <div class="modal-content detail-modal">
                <button class="close-btn detail-close" data-close="detailModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <!-- Hero Section -->
                <div id="detailHero" class="detail-hero">
                    <div id="detailHeroContent" class="detail-hero-content"></div>
                    <div class="detail-hero-info">
                        <span id="detailTypeBadge" class="detail-type-badge">Red</span>
                        <div id="detailName" class="detail-wine-name">Wine Name</div>
                        <div id="detailProducer" class="detail-wine-producer">Producer</div>
                        <div id="detailRegion" class="detail-wine-region">Region, Country</div>
                    </div>
                </div>

                <!-- Content -->
                <div class="detail-content">
                    <div class="detail-facts-row">
                        <div class="detail-fact">
                            <div class="detail-fact-label">Year</div>
                            <div id="detailYear" class="detail-fact-value">2020</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Grape</div>
                            <div id="detailGrape" class="detail-fact-value">Cabernet</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Price</div>
                            <div id="detailPrice" class="detail-fact-value">‚Ç¨25</div>
                        </div>
                    </div>

                    <div id="detailDrinkWindowSection" class="detail-drink-window">
                        <div class="detail-drink-icon">üç∑</div>
                        <div class="detail-drink-text">
                            <div class="detail-drink-label">Best drinking</div>
                            <div id="detailDrinkWindow" class="detail-drink-range">2025 ‚Äî 2030</div>
                        </div>
                        <span id="detailDrinkStatus" class="detail-drink-badge">Now perfect</span>
                    </div>

                    <div id="detailStoreSection" class="detail-store">
                        <span class="store-icon">üõí</span>
                        <span id="detailStore">Winkel</span>
                    </div>

                    <div class="detail-profile-section">
                        <div class="detail-profile-title">Profile</div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Boldness</span>
                            <div class="detail-bar-track"><div id="detailBoldness" class="detail-bar-fill boldness"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Tannins</span>
                            <div class="detail-bar-track"><div id="detailTannins" class="detail-bar-fill tannins"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Acidity</span>
                            <div class="detail-bar-track"><div id="detailAcidity" class="detail-bar-fill acidity"></div></div>
                        </div>
                    </div>

                    <div id="detailNotesSection" class="detail-notes-section">
                        <div class="detail-notes-label">Notes</div>
                        <div id="detailNotes" class="detail-notes-text"></div>
                    </div>

                    <div class="detail-cellar-label">In Cellar</div>
                    <div class="detail-cellar-section">
                        <button class="detail-cellar-btn" id="detailDecrease">‚àí</button>
                        <div>
                            <div id="detailQuantity" class="detail-cellar-count">1</div>
                            <div class="detail-cellar-unit">bottles</div>
                        </div>
                        <button class="detail-cellar-btn" id="detailIncrease">+</button>
                    </div>

                    <div class="detail-actions">
                        <button id="editWineBtn" class="detail-action-btn detail-btn-edit">Edit</button>
                        <button id="deleteWineBtn" class="detail-action-btn detail-btn-delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Archive Wine Modal (replaces simple delete) -->
        <div id="archiveModal" class="modal">
            <div class="modal-content archive-modal">
                <div class="modal-header">
                    <h2>Wijn Archiveren</h2>
                    <button class="close-btn" data-close="archiveModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="archive-wine-name" id="archiveWineName">Wine Name</p>

                    <div class="archive-section">
                        <label>Hoe vond je deze wijn?</label>
                        <div class="star-rating" id="archiveRating">
                            <span class="star" data-rating="1">‚òÖ</span>
                            <span class="star" data-rating="2">‚òÖ</span>
                            <span class="star" data-rating="3">‚òÖ</span>
                            <span class="star" data-rating="4">‚òÖ</span>
                            <span class="star" data-rating="5">‚òÖ</span>
                        </div>
                        <span class="rating-label" id="ratingLabel">Selecteer een beoordeling</span>
                    </div>

                    <div class="archive-section">
                        <label>Zou je deze wijn opnieuw kopen?</label>
                        <div class="rebuy-options" id="rebuyOptions">
                            <button type="button" class="rebuy-btn" data-rebuy="yes">
                                <span class="rebuy-icon">üëç</span>
                                <span>Ja!</span>
                            </button>
                            <button type="button" class="rebuy-btn" data-rebuy="maybe">
                                <span class="rebuy-icon">ü§î</span>
                                <span>Misschien</span>
                            </button>
                            <button type="button" class="rebuy-btn" data-rebuy="no">
                                <span class="rebuy-icon">üëé</span>
                                <span>Nee</span>
                            </button>
                        </div>
                    </div>

                    <div class="archive-section">
                        <label for="archiveNotes">Notities (optioneel)</label>
                        <textarea id="archiveNotes" rows="2" placeholder="Je ervaring met deze wijn..."></textarea>
                    </div>

                    <div class="archive-actions">
                        <button type="button" class="skip-archive-btn" id="skipArchive">Alleen verwijderen</button>
                        <button type="button" class="confirm-archive-btn" id="confirmArchive">Archiveren</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Archive List Modal -->
        <div id="archiveListModal" class="modal">
            <div class="modal-content archive-list-modal">
                <div class="modal-header">
                    <h2>Archief</h2>
                    <button class="close-btn" data-close="archiveListModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Archive Search -->
                    <div class="archive-search-container">
                        <div class="search-input-wrapper">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                            </svg>
                            <input type="text" id="archiveSearchInput" class="search-input" placeholder="Zoek in archief...">
                            <button id="clearArchiveSearch" class="clear-search-btn hidden">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Archive Filters -->
                    <div class="archive-filters">
                        <select id="archiveTypeFilter" class="archive-filter-select">
                            <option value="">Alle types</option>
                            <option value="red">Rood</option>
                            <option value="white">Wit</option>
                            <option value="ros√©">Ros√©</option>
                            <option value="sparkling">Sparkling</option>
                            <option value="dessert">Dessert</option>
                        </select>
                        <select id="archiveRebuyFilter" class="archive-filter-select">
                            <option value="">Alle beoordelingen</option>
                            <option value="yes">Opnieuw kopen</option>
                            <option value="maybe">Misschien</option>
                            <option value="no">Niet opnieuw</option>
                        </select>
                    </div>

                    <!-- Archive Stats -->
                    <div class="archive-stats" id="archiveStats">
                        <span id="archiveCount">0 wijnen</span>
                    </div>

                    <!-- Archive Empty State -->
                    <div id="archiveEmptyState" class="archive-empty-state">
                        <span class="archive-empty-icon">üìö</span>
                        <p>Je archief is leeg</p>
                        <span class="archive-empty-hint">Verwijderde wijnen met een beoordeling verschijnen hier</span>
                    </div>

                    <!-- Archive List -->
                    <div id="archiveList" class="archive-list"></div>
                </div>
            </div>
        </div>

        <!-- Archive Detail Modal -->
        <div id="archiveDetailModal" class="modal">
            <div class="modal-content detail-modal">
                <button class="close-btn detail-close" data-close="archiveDetailModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <!-- Hero Section -->
                <div id="archiveDetailHero" class="detail-hero">
                    <div id="archiveDetailHeroContent" class="detail-hero-content"></div>
                    <div class="detail-hero-info">
                        <span id="archiveDetailTypeBadge" class="detail-type-badge">Red</span>
                        <div id="archiveDetailName" class="detail-wine-name">Wine Name</div>
                        <div id="archiveDetailProducer" class="detail-wine-producer">Producer</div>
                        <div id="archiveDetailRegion" class="detail-wine-region">Region, Country</div>
                    </div>
                </div>

                <!-- Content -->
                <div class="detail-content">
                    <!-- Rating & Rebuy -->
                    <div class="archive-rating-display">
                        <div class="rating-stars" id="archiveDetailStars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <div class="rebuy-badge" id="archiveDetailRebuy">
                            <span class="rebuy-icon">üëç</span>
                            <span>Opnieuw kopen</span>
                        </div>
                    </div>

                    <div class="detail-facts-row">
                        <div class="detail-fact">
                            <div class="detail-fact-label">Year</div>
                            <div id="archiveDetailYear" class="detail-fact-value">2020</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Grape</div>
                            <div id="archiveDetailGrape" class="detail-fact-value">Cabernet</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Price</div>
                            <div id="archiveDetailPrice" class="detail-fact-value">‚Ç¨25</div>
                        </div>
                    </div>

                    <div id="archiveDetailStoreSection" class="detail-store">
                        <span class="store-icon">üõí</span>
                        <span id="archiveDetailStore">Winkel</span>
                    </div>

                    <div class="detail-profile-section">
                        <div class="detail-profile-title">Profile</div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Boldness</span>
                            <div class="detail-bar-track"><div id="archiveDetailBoldness" class="detail-bar-fill boldness"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Tannins</span>
                            <div class="detail-bar-track"><div id="archiveDetailTannins" class="detail-bar-fill tannins"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Acidity</span>
                            <div class="detail-bar-track"><div id="archiveDetailAcidity" class="detail-bar-fill acidity"></div></div>
                        </div>
                    </div>

                    <div id="archiveDetailNotesSection" class="detail-notes-section">
                        <div class="detail-notes-label">Notes</div>
                        <div id="archiveDetailNotes" class="detail-notes-text"></div>
                    </div>

                    <div id="archiveDetailReviewSection" class="detail-notes-section archive-review">
                        <div class="detail-notes-label">Mijn Review</div>
                        <div id="archiveDetailReview" class="detail-notes-text"></div>
                        <span class="archive-date" id="archiveDetailDate"></span>
                    </div>

                    <div class="detail-actions">
                        <button id="restoreWineBtn" class="detail-action-btn detail-btn-edit">Terugzetten</button>
                        <button id="deleteArchiveBtn" class="detail-action-btn detail-btn-delete">Verwijderen</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Year Picker Modal -->
        <div id="yearModal" class="modal">
            <div class="modal-content year-modal">
                <div class="year-picker-header">
                    <h2>Welk jaartal?</h2>
                    <p>Selecteer het vintage jaar</p>
                </div>
                <div class="year-picker-buttons"></div>
                <button class="year-pick-skip">Overslaan</button>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast">
            <span id="toastMessage"></span>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <script src="config.js?v=42"></script>
    <script src="app.js?v=42"></script>
</body>
</html>
