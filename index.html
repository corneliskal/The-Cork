<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Cork - Wine Cellar</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="theme-color" content="#722F37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="The Cork">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="styles.css?v=80">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Outfit:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 168 255" xmlns="http://www.w3.org/2000/svg">
                        <path d="M61.00,253.90 C38.67,251.95 18.78,245.93 13.03,239.39 C11.37,237.49 10.00,235.48 10.00,234.93 C10.00,234.38 10.87,227.98 11.94,220.72 C16.58,189.14 19.02,171.91 20.03,163.55 C20.62,158.63 22.00,148.78 23.09,141.67 C24.18,134.56 24.94,128.66 24.79,128.56 C24.63,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.73,121.59 151.00,125.77 L145.50,128.74 L145.64,135.91 C145.72,139.85 146.48,147.22 147.34,152.29 C148.20,157.35 150.30,170.72 152.01,182.00 C153.73,193.28 156.23,209.47 157.57,218.00 C158.91,226.53 160.01,234.05 160.01,234.72 C159.99,237.29 153.79,242.82 148.03,245.40 C130.81,253.13 93.73,256.75 61.00,253.90 Z M126.40,245.66 C140.28,242.70 150.68,238.11 151.58,234.55 C152.17,232.17 151.09,224.07 145.97,192.50 C138.69,147.71 136.86,135.36 136.68,130.12 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C17.06,120.14 41.16,127.39 72.26,128.71 C87.22,129.35 90.59,130.38 87.97,133.54 C86.65,135.13 85.08,135.23 71.51,134.63 C63.25,134.26 53.35,133.53 49.50,133.00 C45.65,132.48 40.23,131.76 37.46,131.41 L32.42,130.77 L31.32,139.14 C29.42,153.54 22.45,202.83 18.91,226.83 C17.94,233.44 18.01,234.35 19.66,236.18 C22.45,239.27 28.24,241.88 37.30,244.14 C53.12,248.09 63.08,248.93 89.50,248.56 C111.64,248.24 115.86,247.91 126.40,245.66 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                    </svg>
                    <div class="logo-text">
                        <span class="logo-title">The Cork</span>
                        <span class="logo-subtitle">Wine Inventory</span>
                    </div>
                </div>
                <div class="header-stats">
                    <span id="syncStatus" class="sync-icon status-local"><svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M19.35 10.04A7.49 7.49 0 0 0 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46A5.47 5.47 0 0 1 12 6a5.5 5.5 0 0 1 5.5 5.5v.5H19a3 3 0 0 1 3 3c0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2 1.27-1.27L4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"/></svg></span>
                    <span id="totalBottles">0</span> bottles
                </div>
                <div class="header-actions">
                    <button id="wishlistBtn" class="header-icon-btn" aria-label="Wishlist">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                    </button>
                    <button id="archiveBtn" class="header-icon-btn" aria-label="Archive">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 8v13H3V8"/>
                            <path d="M1 3h22v5H1z"/>
                            <path d="M10 12h4"/>
                        </svg>
                    </button>
                    <button id="settingsBtn" class="header-icon-btn" aria-label="Settings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Login Screen -->
        <div id="loginScreen" class="login-screen">
            <div class="login-content">
                <div class="login-stacked-logo">
                    <svg class="login-logo" viewBox="0 0 168 255" xmlns="http://www.w3.org/2000/svg">
                        <path d="M61.00,253.90 C38.67,251.95 18.78,245.93 13.03,239.39 C11.37,237.49 10.00,235.48 10.00,234.93 C10.00,234.38 10.87,227.98 11.94,220.72 C16.58,189.14 19.02,171.91 20.03,163.55 C20.62,158.63 22.00,148.78 23.09,141.67 C24.18,134.56 24.94,128.66 24.79,128.56 C24.63,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.73,121.59 151.00,125.77 L145.50,128.74 L145.64,135.91 C145.72,139.85 146.48,147.22 147.34,152.29 C148.20,157.35 150.30,170.72 152.01,182.00 C153.73,193.28 156.23,209.47 157.57,218.00 C158.91,226.53 160.01,234.05 160.01,234.72 C159.99,237.29 153.79,242.82 148.03,245.40 C130.81,253.13 93.73,256.75 61.00,253.90 Z M126.40,245.66 C140.28,242.70 150.68,238.11 151.58,234.55 C152.17,232.17 151.09,224.07 145.97,192.50 C138.69,147.71 136.86,135.36 136.68,130.12 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C17.06,120.14 41.16,127.39 72.26,128.71 C87.22,129.35 90.59,130.38 87.97,133.54 C86.65,135.13 85.08,135.23 71.51,134.63 C63.25,134.26 53.35,133.53 49.50,133.00 C45.65,132.48 40.23,131.76 37.46,131.41 L32.42,130.77 L31.32,139.14 C29.42,153.54 22.45,202.83 18.91,226.83 C17.94,233.44 18.01,234.35 19.66,236.18 C22.45,239.27 28.24,241.88 37.30,244.14 C53.12,248.09 63.08,248.93 89.50,248.56 C111.64,248.24 115.86,247.91 126.40,245.66 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                    </svg>
                    <span class="login-logo-title">The Cork</span>
                    <span class="login-logo-tagline">Wine Cellar Inventory</span>
                </div>
                <h1>Welcome to The Cork</h1>
                <p>Sign in to manage your wine cellar and sync across all your devices.</p>

                <!-- Email/Password Form -->
                <form id="emailAuthForm" class="email-auth-form">
                    <div class="form-group">
                        <input type="email" id="loginEmail" class="auth-input" placeholder="Email address" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" class="auth-input" placeholder="Password" required minlength="6">
                    </div>
                    <button type="submit" id="emailSignInBtn" class="email-sign-in-btn">
                        Sign in
                    </button>
                </form>

                <button type="button" id="toggleRegisterBtn" class="toggle-auth-btn">
                    Don't have an account? <span>Register</span>
                </button>

                <button type="button" id="forgotPasswordBtn" class="forgot-password-btn">
                    Forgot password?
                </button>

                <div class="auth-divider">
                    <span>or</span>
                </div>

                <button id="loginGoogleBtn" class="google-sign-in-btn large">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign in with Google
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content hidden">
            <!-- Sticky Filter Bar -->
            <div id="filterBar" class="filter-bar hidden">
                <!-- Search -->
                <div class="search-input-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search wine, producer, grape...">
                    <button id="clearSearch" class="clear-search-btn hidden">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>

                <!-- Filter Row: 3 dropdowns + advanced button -->
                <div id="filterRow" class="filter-row">
                    <!-- Type Dropdown -->
                    <div class="filter-dropdown" id="typeDropdown">
                        <button class="filter-dropdown-btn" data-dropdown="type">
                            <span class="filter-dropdown-label">
                                <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                                    <path d="M12 3c-3 4.5-7 8-7 12a7 7 0 0014 0c0-4-4-7.5-7-12z"/>
                                </svg>
                                <span class="filter-dropdown-text">Type</span>
                            </span>
                            <span class="filter-dropdown-actions">
                                <span class="filter-dropdown-clear hidden" data-clear="type">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                </span>
                                <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                            </span>
                        </button>
                        <div class="filter-dropdown-menu hidden" data-menu="type">
                            <button class="filter-dropdown-option" data-filter="type" data-value="red"><span class="filter-opt-label"><span class="filter-type-dot dot-red"></span>Red</span></button>
                            <button class="filter-dropdown-option" data-filter="type" data-value="white"><span class="filter-opt-label"><span class="filter-type-dot dot-white"></span>White</span></button>
                            <button class="filter-dropdown-option" data-filter="type" data-value="rosé"><span class="filter-opt-label"><span class="filter-type-dot dot-rosé"></span>Rosé</span></button>
                            <button class="filter-dropdown-option" data-filter="type" data-value="sparkling"><span class="filter-opt-label"><span class="filter-type-dot dot-sparkling"></span>Sparkling</span></button>
                            <button class="filter-dropdown-option" data-filter="type" data-value="dessert"><span class="filter-opt-label"><span class="filter-type-dot dot-dessert"></span>Dessert</span></button>
                            <button class="filter-dropdown-option" data-filter="type" data-value="orange"><span class="filter-opt-label"><span class="filter-type-dot dot-orange"></span>Orange</span></button>
                        </div>
                    </div>

                    <!-- Grape Dropdown (dynamisch gevuld vanuit JS) -->
                    <div class="filter-dropdown" id="grapeDropdown">
                        <button class="filter-dropdown-btn" data-dropdown="grape">
                            <span class="filter-dropdown-label">
                                <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                                    <circle cx="9" cy="10" r="2.5"/><circle cx="15" cy="10" r="2.5"/><circle cx="12" cy="15" r="2.5"/>
                                    <path d="M12 4v3M10 4.5c-1-1-2.5-.5-2.5-.5M14 4.5c1-1 2.5-.5 2.5-.5"/>
                                </svg>
                                <span class="filter-dropdown-text">Grape</span>
                            </span>
                            <span class="filter-dropdown-actions">
                                <span class="filter-dropdown-clear hidden" data-clear="grape">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                </span>
                                <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                            </span>
                        </button>
                        <div class="filter-dropdown-menu hidden" data-menu="grape"></div>
                    </div>

                    <!-- Window Dropdown -->
                    <div class="filter-dropdown" id="windowDropdown">
                        <button class="filter-dropdown-btn" data-dropdown="window">
                            <span class="filter-dropdown-label">
                                <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                                    <circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/>
                                </svg>
                                <span class="filter-dropdown-text">Window</span>
                            </span>
                            <span class="filter-dropdown-actions">
                                <span class="filter-dropdown-clear hidden" data-clear="window">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                </span>
                                <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                            </span>
                        </button>
                        <div class="filter-dropdown-menu hidden" data-menu="window">
                            <button class="filter-dropdown-option" data-filter="window" data-value="peak"><span class="filter-opt-label"><span class="filter-window-dot" style="background:#4A7A3F"></span>At Peak</span></button>
                            <button class="filter-dropdown-option" data-filter="window" data-value="ready"><span class="filter-opt-label"><span class="filter-window-dot" style="background:#8B7444"></span>Ready</span></button>
                            <button class="filter-dropdown-option" data-filter="window" data-value="opening"><span class="filter-opt-label"><span class="filter-window-dot" style="background:#B8863A"></span>Opening Up</span></button>
                            <button class="filter-dropdown-option" data-filter="window" data-value="drink-soon"><span class="filter-opt-label"><span class="filter-window-dot" style="background:#9B4049"></span>Drink Soon</span></button>
                        </div>
                    </div>

                    <!-- Advanced Filter Button -->
                    <button id="advancedFilterBtn" class="advanced-filter-btn" title="Advanced filters">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                            <line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/>
                            <line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/>
                            <circle cx="4" cy="12" r="2" fill="currentColor"/><circle cx="12" cy="10" r="2" fill="currentColor"/><circle cx="20" cy="14" r="2" fill="currentColor"/>
                        </svg>
                        <span class="advanced-filter-badge hidden" id="advancedBadge">0</span>
                    </button>
                </div>

                <!-- Active Filter Bar -->
                <div id="activeFilterBar" class="active-filter-bar hidden">
                    <div class="active-filter-left">
                        <span class="active-filter-count" id="activeFilterCount">0</span>
                        <div id="activeFilterTags" class="active-filter-tags"></div>
                    </div>
                    <button id="clearAllFilters" class="active-filter-clear">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                        Clear
                    </button>
                </div>

                <!-- Search Results -->
                <div id="searchResults" class="search-results hidden">
                    <span id="searchResultCount">0 results</span>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state">
                <div class="empty-illustration">
                    <div class="empty-stacked-logo">
                        <svg class="empty-logo" viewBox="0 0 168 255" xmlns="http://www.w3.org/2000/svg">
                            <path d="M61.00,253.90 C38.67,251.95 18.78,245.93 13.03,239.39 C11.37,237.49 10.00,235.48 10.00,234.93 C10.00,234.38 10.87,227.98 11.94,220.72 C16.58,189.14 19.02,171.91 20.03,163.55 C20.62,158.63 22.00,148.78 23.09,141.67 C24.18,134.56 24.94,128.66 24.79,128.56 C24.63,128.46 21.58,126.97 18.00,125.24 C9.50,121.12 4.18,116.60 1.89,111.57 C0.19,107.83 0.04,104.24 0.02,67.37 C-0.00,23.19 0.06,22.65 6.11,17.56 C13.99,10.93 29.40,5.59 50.00,2.36 C64.72,0.05 103.60,0.08 117.50,2.40 C141.30,6.39 157.13,12.18 164.00,19.42 L167.50,23.11 L167.78,66.09 C168.03,104.49 167.88,109.44 166.40,112.58 C164.45,116.68 158.73,121.59 151.00,125.77 L145.50,128.74 L145.64,135.91 C145.72,139.85 146.48,147.22 147.34,152.29 C148.20,157.35 150.30,170.72 152.01,182.00 C153.73,193.28 156.23,209.47 157.57,218.00 C158.91,226.53 160.01,234.05 160.01,234.72 C159.99,237.29 153.79,242.82 148.03,245.40 C130.81,253.13 93.73,256.75 61.00,253.90 Z M126.40,245.66 C140.28,242.70 150.68,238.11 151.58,234.55 C152.17,232.17 151.09,224.07 145.97,192.50 C138.69,147.71 136.86,135.36 136.68,130.12 L136.50,124.51 L145.00,120.41 C150.51,117.75 154.82,114.84 157.25,112.15 L161.00,107.99 L161.00,74.41 C161.00,55.94 160.66,41.01 160.25,41.22 C139.42,51.92 118.56,56.06 85.00,56.16 C54.11,56.24 30.04,52.10 13.77,43.88 L8.00,40.97 L8.00,73.84 C8.00,106.38 8.02,106.74 10.28,110.08 C17.06,120.14 41.16,127.39 72.26,128.71 C87.22,129.35 90.59,130.38 87.97,133.54 C86.65,135.13 85.08,135.23 71.51,134.63 C63.25,134.26 53.35,133.53 49.50,133.00 C45.65,132.48 40.23,131.76 37.46,131.41 L32.42,130.77 L31.32,139.14 C29.42,153.54 22.45,202.83 18.91,226.83 C17.94,233.44 18.01,234.35 19.66,236.18 C22.45,239.27 28.24,241.88 37.30,244.14 C53.12,248.09 63.08,248.93 89.50,248.56 C111.64,248.24 115.86,247.91 126.40,245.66 Z M119.00,46.62 C139.09,42.91 150.24,39.05 156.75,33.56 C160.75,30.19 160.90,27.23 157.25,23.74 C142.39,9.51 83.33,3.55 40.11,11.93 C23.14,15.22 8.00,22.76 8.00,27.93 C8.00,35.35 28.26,43.53 56.50,47.51 C69.71,49.37 106.99,48.84 119.00,46.62 Z" fill="#722F37" fill-rule="evenodd"/>
                        </svg>
                        <span class="empty-logo-title">The Cork</span>
                        <span class="empty-logo-tagline">Wine Cellar Inventory</span>
                    </div>
                </div>
                <h2>Your cellar is empty</h2>
                <p>Tap + to add your first bottle</p>
            </div>

            <!-- Wine List -->
            <div id="wineList" class="wine-list"></div>
        </main>

        <!-- Add Button -->
        <button id="addWineBtn" class="fab" aria-label="Add wine">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content settings-modal">
                <div class="modal-header">
                    <h2>Instellingen</h2>
                    <button class="close-btn" data-close="settingsModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section" id="authSection">
                        <h3>Account & Cloud Sync</h3>
                        <p class="settings-description">
                            Your wine cellar is synced with your Google account.<br>
                            All your wines are available across all your devices.
                        </p>

                        <div class="api-key-status" id="userInfo" style="display: none; color: var(--system-green);">
                        </div>

                        <button id="googleSignInBtn" class="google-sign-in-btn">
                            <svg viewBox="0 0 24 24" width="18" height="18">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            Inloggen met Google
                        </button>

                        <button id="signOutBtn" class="clear-key-btn" style="display: none;">
                            Sign out
                        </button>

                        <div class="api-key-status" id="firebaseSyncStatus" style="margin-top: 12px;">
                            <span class="status-disconnected">Niet ingelogd</span>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>AI Wijnherkenning</h3>
                        <div class="api-key-status" id="aiStatus">
                            <span class="status-connected">✓ Automatic label recognition active</span>
                        </div>
                        <p class="settings-description">
                            Take a photo of a wine label and the app automatically recognizes the wine,
                            grape variety, region, and provides tasting notes.
                        </p>
                    </div>

                    <div class="settings-section">
                        <h3>Over The Cork</h3>
                        <p class="settings-description">
                            The Cork uses AI vision to read wine labels and automatically
                            retrieve wine characteristics, tasting notes, and price information.<br><br>
                            Version 2.0 - Now with cloud sync and archive.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Wine Modal -->
        <div id="addModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="addModalTitle">Add Wine</h2>
                    <button class="close-btn" data-close="addModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Destination Choice -->
                    <div id="addDestinationStep" class="add-step">
                        <div class="destination-tiles">
                            <button class="destination-tile" data-destination="cellar">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M8 2h8l-1.5 8a3.5 3.5 0 0 1-2.5 2.5 3.5 3.5 0 0 1-2.5-2.5L8 2z"/>
                                    <line x1="12" y1="12.5" x2="12" y2="19"/>
                                    <line x1="8" y1="19" x2="16" y2="19"/>
                                </svg>
                                <span class="tile-label">Cellar</span>
                                <span class="tile-hint">Add to your collection</span>
                            </button>
                            <button class="destination-tile" data-destination="wishlist">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                </svg>
                                <span class="tile-label">Wishlist</span>
                                <span class="tile-hint">Save for later</span>
                            </button>
                        </div>
                    </div>

                    <!-- Scanning Indicator -->
                    <div id="scanningIndicator" class="scanning-indicator hidden">
                        <div class="scanning-animation">
                            <div class="scan-line"></div>
                        </div>
                        <p>Reading label...</p>
                    </div>

                    <!-- Hidden file input for photo picker -->
                    <input type="file" id="addPhotoInput" accept="image/*" hidden>

                    <!-- Edit Form (hidden, only shown in edit mode) -->
                    <div id="addStepEdit" class="add-step hidden">
                        <div class="upload-section">
                            <div id="imagePreview" class="image-preview">
                                <div class="upload-placeholder">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                                        <circle cx="8.5" cy="8.5" r="1.5"/>
                                        <path d="M21 15l-5-5L5 21"/>
                                    </svg>
                                    <span>Tap to add photo</span>
                                </div>
                                <img id="previewImg" src="" alt="Wine label preview">
                            </div>
                            <input type="file" id="editPhotoInput" accept="image/*" hidden>
                        </div>

                        <form id="wineForm" class="wine-form">
                            <div class="form-group">
                                <label for="wineName">Wine Name *</label>
                                <input type="text" id="wineName" required placeholder="e.g., Grand Vin 2015">
                            </div>

                            <div class="form-group">
                                <label for="wineProducer">Producer / House</label>
                                <input type="text" id="wineProducer" placeholder="e.g., Chateau Margaux">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="wineType">Type</label>
                                    <select id="wineType">
                                        <option value="red">Red</option>
                                        <option value="white">White</option>
                                        <option value="rosé">Rosé</option>
                                        <option value="sparkling">Sparkling</option>
                                        <option value="dessert">Dessert</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="wineYear">Year</label>
                                    <input type="number" id="wineYear" min="1900" max="2030" placeholder="2020">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="wineRegion">Region</label>
                                <input type="text" id="wineRegion" placeholder="e.g., Bordeaux, France">
                            </div>

                            <div class="form-group">
                                <label for="wineGrape">Grape Variety</label>
                                <input type="text" id="wineGrape" placeholder="e.g., Cabernet Sauvignon">
                            </div>

                            <div class="characteristics-section">
                                <h3>Characteristics</h3>

                                <div class="characteristic-slider">
                                    <label>
                                        <span>Boldness</span>
                                        <span class="char-value" id="boldnessValue">3</span>
                                    </label>
                                    <input type="range" id="boldness" min="1" max="5" value="3">
                                    <div class="slider-labels">
                                        <span>Light</span>
                                        <span>Bold</span>
                                    </div>
                                </div>

                                <div class="characteristic-slider">
                                    <label>
                                        <span>Tannins</span>
                                        <span class="char-value" id="tanninsValue">3</span>
                                    </label>
                                    <input type="range" id="tannins" min="1" max="5" value="3">
                                    <div class="slider-labels">
                                        <span>Smooth</span>
                                        <span>Tannic</span>
                                    </div>
                                </div>

                                <div class="characteristic-slider">
                                    <label>
                                        <span>Acidity</span>
                                        <span class="char-value" id="acidityValue">3</span>
                                    </label>
                                    <input type="range" id="acidity" min="1" max="5" value="3">
                                    <div class="slider-labels">
                                        <span>Soft</span>
                                        <span>Acidic</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="winePrice">Price (€)</label>
                                    <input type="number" id="winePrice" min="0" step="0.01" placeholder="25.00">
                                </div>
                                <div class="form-group">
                                    <label for="wineQuantity">Quantity</label>
                                    <div class="quantity-control">
                                        <button type="button" class="qty-btn" data-action="decrease">−</button>
                                        <input type="number" id="wineQuantity" min="1" value="1">
                                        <button type="button" class="qty-btn" data-action="increase">+</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="wineStore">Store</label>
                                <input type="text" id="wineStore" placeholder="e.g., Total Wine, Vivino">
                            </div>

                            <div class="form-group">
                                <label>Drinking Window</label>
                                <div class="drink-window-row">
                                    <input type="number" id="drinkFrom" min="1900" max="2100" placeholder="From">
                                    <span class="drink-window-separator">—</span>
                                    <input type="number" id="drinkUntil" min="1900" max="2100" placeholder="Until">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="wineNotes">Tasting Notes</label>
                                <textarea id="wineNotes" rows="3" placeholder="Your personal notes..."></textarea>
                            </div>

                            <button type="submit" class="submit-btn">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wine Detail Modal -->
        <div id="detailModal" class="modal">
            <div class="modal-content detail-modal">
                <button class="close-btn detail-close" data-close="detailModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <!-- Hero Section -->
                <div id="detailHero" class="detail-hero">
                    <div id="detailHeroContent" class="detail-hero-content"></div>
                    <div class="detail-hero-info">
                        <span id="detailTypeBadge" class="detail-type-badge">Red</span>
                        <div id="detailName" class="detail-wine-name">Wine Name</div>
                        <div id="detailProducer" class="detail-wine-producer">Producer</div>
                        <div id="detailRegion" class="detail-wine-region">Region, Country</div>
                    </div>
                </div>

                <!-- Content -->
                <div class="detail-content">
                    <div class="detail-facts-row">
                        <div class="detail-fact">
                            <div class="detail-fact-label">Year</div>
                            <div id="detailYear" class="detail-fact-value">2020</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Grape</div>
                            <div id="detailGrape" class="detail-fact-value">Cabernet</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Price</div>
                            <div id="detailPrice" class="detail-fact-value">€25</div>
                        </div>
                        <div class="detail-fact" id="detailAlcoholFact" style="display:none">
                            <div class="detail-fact-label">Alcohol</div>
                            <div id="detailAlcohol" class="detail-fact-value">—</div>
                        </div>
                    </div>

                    <div id="detailDrinkWindowSection" class="detail-drink-window-card">
                        <div class="dw-card-label">Drinking window</div>
                        <div id="detailDrinkTimeline" class="dw-timeline-container"></div>
                    </div>

                    <div class="detail-profile-section">
                        <div class="detail-profile-title">Profile</div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Boldness</span>
                            <div class="detail-bar-track"><div id="detailBoldness" class="detail-bar-fill boldness"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Tannins</span>
                            <div class="detail-bar-track"><div id="detailTannins" class="detail-bar-fill tannins"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Acidity</span>
                            <div class="detail-bar-track"><div id="detailAcidity" class="detail-bar-fill acidity"></div></div>
                        </div>
                    </div>

                    <div id="detailExpertSection" class="detail-expert-section" style="display:none">
                        <div class="detail-expert-title">Expert Ratings</div>
                        <div id="detailExpertRatings" class="detail-expert-ratings"></div>
                    </div>

                    <div id="detailNotesSection" class="detail-notes-section">
                        <div class="detail-notes-label">Notes</div>
                        <div id="detailNotes" class="detail-notes-text"></div>
                    </div>

                    <div id="detailStoreSection" class="detail-store-section" style="display:none">
                        <div id="detailStoreDisplay" class="detail-store-display">
                            <span class="store-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="18" height="18"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg></span>
                            <span id="detailStore" class="detail-store-name"></span>
                            <button class="detail-store-edit" id="detailStoreEditBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
                        </div>
                    </div>

                    <div id="detailRatingSection" class="detail-rating-card">
                        <div class="rating-card-label">Your Rating</div>
                        <div class="rating-slider-container">
                            <div class="rating-header">
                                <span class="rating-badge" id="detailRatingBadge">Not rated</span>
                                <span class="rating-value" id="detailRatingValue"></span>
                            </div>
                            <div class="rating-track-wrapper">
                                <div class="rating-track">
                                    <div class="rating-fill" id="detailRatingFill"></div>
                                    <div class="rating-thumb" id="detailRatingThumb"></div>
                                    <div class="rating-markers">
                                        <div class="rating-marker" style="left:20%"><span>1</span></div>
                                        <div class="rating-marker" style="left:40%"><span>2</span></div>
                                        <div class="rating-marker" style="left:60%"><span>3</span></div>
                                        <div class="rating-marker" style="left:80%"><span>4</span></div>
                                        <div class="rating-marker" style="left:100%"><span>5</span></div>
                                    </div>
                                </div>
                                <input type="range" class="rating-range-input" id="detailRatingInput"
                                       min="0" max="5" step="0.1" value="0">
                            </div>
                        </div>
                    </div>

                    <div id="detailEnrichmentSection" class="detail-enrichment-section" style="display:none">
                        <div class="detail-enrichment-header" id="enrichmentToggle">
                            <span class="detail-section-title">Enrichment Log</span>
                            <span class="enrichment-toggle-icon">&#9654;</span>
                        </div>
                        <div id="enrichmentLogContent" class="enrichment-log-content" style="display:none"></div>
                    </div>

                    <div class="detail-cellar-label">In Cellar</div>
                    <div class="detail-cellar-section">
                        <button class="detail-cellar-btn" id="detailDecrease">−</button>
                        <div>
                            <div id="detailQuantity" class="detail-cellar-count">1</div>
                            <div class="detail-cellar-unit">bottles</div>
                        </div>
                        <button class="detail-cellar-btn" id="detailIncrease">+</button>
                    </div>

                    <div class="detail-actions">
                        <button id="editWineBtn" class="detail-action-btn detail-btn-edit">Edit</button>
                        <button id="deleteWineBtn" class="detail-action-btn detail-btn-delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Archive Wine Modal (replaces simple delete) -->
        <div id="archiveModal" class="modal">
            <div class="modal-content archive-modal">
                <div class="modal-header">
                    <h2>Wijn Archiveren</h2>
                    <button class="close-btn" data-close="archiveModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="archive-wine-name" id="archiveWineName">Wine Name</p>

                    <div class="archive-section">
                        <label>How did you like this wine?</label>
                        <div class="rating-slider-container">
                            <div class="rating-header">
                                <span class="rating-badge" id="archiveRatingBadge">Not rated</span>
                                <span class="rating-value" id="archiveRatingValue"></span>
                            </div>
                            <div class="rating-track-wrapper">
                                <div class="rating-track">
                                    <div class="rating-fill" id="archiveRatingFill"></div>
                                    <div class="rating-thumb" id="archiveRatingThumb"></div>
                                    <div class="rating-markers">
                                        <div class="rating-marker" style="left:20%"><span>1</span></div>
                                        <div class="rating-marker" style="left:40%"><span>2</span></div>
                                        <div class="rating-marker" style="left:60%"><span>3</span></div>
                                        <div class="rating-marker" style="left:80%"><span>4</span></div>
                                        <div class="rating-marker" style="left:100%"><span>5</span></div>
                                    </div>
                                </div>
                                <input type="range" class="rating-range-input" id="archiveRatingInput"
                                       min="0" max="5" step="0.1" value="0">
                            </div>
                        </div>
                    </div>

                    <div class="archive-section">
                        <label>Would you buy this wine again?</label>
                        <div class="rebuy-options" id="rebuyOptions">
                            <button type="button" class="rebuy-btn" data-rebuy="yes">
                                <span class="rebuy-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"/><path d="M7 22H4a2 2 0 01-2-2v-7a2 2 0 012-2h3"/></svg></span>
                                <span>Yes!</span>
                            </button>
                            <button type="button" class="rebuy-btn" data-rebuy="maybe">
                                <span class="rebuy-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><circle cx="12" cy="12" r="10"/><line x1="8" y1="15" x2="16" y2="15"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg></span>
                                <span>Maybe</span>
                            </button>
                            <button type="button" class="rebuy-btn" data-rebuy="no">
                                <span class="rebuy-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M10 15V19a3 3 0 003 3l4-9V2H5.72a2 2 0 00-2 1.7l-1.38 9a2 2 0 002 2.3H10z"/><path d="M17 2h2.67A2.31 2.31 0 0122 4v7a2.31 2.31 0 01-2.33 2H17"/></svg></span>
                                <span>No</span>
                            </button>
                        </div>
                    </div>

                    <div class="archive-section">
                        <label for="archiveNotes">Notes (optional)</label>
                        <textarea id="archiveNotes" rows="2" placeholder="Your experience with this wine..."></textarea>
                    </div>

                    <div class="archive-actions">
                        <button type="button" class="skip-archive-btn" id="skipArchive">Just delete</button>
                        <button type="button" class="confirm-archive-btn" id="confirmArchive">Archive</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Archive List Modal -->
        <div id="archiveListModal" class="modal">
            <div class="modal-content archive-list-modal">
                <div class="modal-header">
                    <h2>Archive</h2>
                    <button class="close-btn" data-close="archiveListModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Archive Search -->
                    <div class="archive-search-container">
                        <div class="search-input-wrapper">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                            </svg>
                            <input type="text" id="archiveSearchInput" class="search-input" placeholder="Search archive...">
                            <button id="clearArchiveSearch" class="clear-search-btn hidden">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Archive Filter Row -->
                    <div id="archiveFilterRow" class="filter-row" style="margin-top:var(--space-8)">
                        <!-- Type Dropdown -->
                        <div class="filter-dropdown" id="archiveTypeDropdown">
                            <button class="filter-dropdown-btn" data-archive-dropdown="type">
                                <span class="filter-dropdown-label">
                                    <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"><path d="M12 3c-3 4.5-7 8-7 12a7 7 0 0014 0c0-4-4-7.5-7-12z"/></svg>
                                    <span class="filter-dropdown-text" data-archive-text="type">Type</span>
                                </span>
                                <span class="filter-dropdown-actions">
                                    <span class="filter-dropdown-clear hidden" data-archive-clear="type">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                    </span>
                                    <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                                </span>
                            </button>
                            <div class="filter-dropdown-menu hidden" data-archive-menu="type">
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="red"><span class="filter-opt-label"><span class="filter-type-dot dot-red"></span>Red</span></button>
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="white"><span class="filter-opt-label"><span class="filter-type-dot dot-white"></span>White</span></button>
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="rosé"><span class="filter-opt-label"><span class="filter-type-dot dot-rosé"></span>Rosé</span></button>
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="sparkling"><span class="filter-opt-label"><span class="filter-type-dot dot-sparkling"></span>Sparkling</span></button>
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="dessert"><span class="filter-opt-label"><span class="filter-type-dot dot-dessert"></span>Dessert</span></button>
                                <button class="filter-dropdown-option" data-archive-filter="type" data-value="orange"><span class="filter-opt-label"><span class="filter-type-dot dot-orange"></span>Orange</span></button>
                            </div>
                        </div>

                        <!-- Grape Dropdown (dynamisch) -->
                        <div class="filter-dropdown" id="archiveGrapeDropdown">
                            <button class="filter-dropdown-btn" data-archive-dropdown="grape">
                                <span class="filter-dropdown-label">
                                    <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"><circle cx="9" cy="10" r="2.5"/><circle cx="15" cy="10" r="2.5"/><circle cx="12" cy="15" r="2.5"/><path d="M12 4v3M10 4.5c-1-1-2.5-.5-2.5-.5M14 4.5c1-1 2.5-.5 2.5-.5"/></svg>
                                    <span class="filter-dropdown-text" data-archive-text="grape">Grape</span>
                                </span>
                                <span class="filter-dropdown-actions">
                                    <span class="filter-dropdown-clear hidden" data-archive-clear="grape">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                    </span>
                                    <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                                </span>
                            </button>
                            <div class="filter-dropdown-menu hidden" data-archive-menu="grape"></div>
                        </div>

                        <!-- Shop Dropdown (dynamisch) -->
                        <div class="filter-dropdown" id="archiveShopDropdown">
                            <button class="filter-dropdown-btn" data-archive-dropdown="shop">
                                <span class="filter-dropdown-label">
                                    <svg class="filter-dropdown-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                                    <span class="filter-dropdown-text" data-archive-text="shop">Shop</span>
                                </span>
                                <span class="filter-dropdown-actions">
                                    <span class="filter-dropdown-clear hidden" data-archive-clear="shop">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                                    </span>
                                    <svg class="filter-dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
                                </span>
                            </button>
                            <div class="filter-dropdown-menu hidden" data-archive-menu="shop"></div>
                        </div>

                        <!-- Advanced Filter Button -->
                        <button id="archiveAdvancedBtn" class="advanced-filter-btn" title="Advanced filters">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                                <line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/>
                                <line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/>
                                <circle cx="4" cy="12" r="2" fill="currentColor"/><circle cx="12" cy="10" r="2" fill="currentColor"/><circle cx="20" cy="14" r="2" fill="currentColor"/>
                            </svg>
                            <span class="advanced-filter-badge hidden" id="archiveAdvancedBadge">0</span>
                        </button>
                    </div>

                    <!-- Archive Active Filter Bar -->
                    <div id="archiveActiveFilterBar" class="active-filter-bar hidden">
                        <div class="active-filter-left">
                            <span class="active-filter-count" id="archiveActiveFilterCount">0</span>
                            <div id="archiveActiveFilterTags" class="active-filter-tags"></div>
                        </div>
                        <button id="archiveClearAllFilters" class="active-filter-clear">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" width="10" height="10"><path d="M18 6L6 18M6 6l12 12"/></svg>
                            Clear
                        </button>
                    </div>

                    <!-- Archive Stats -->
                    <div class="archive-stats" id="archiveStats">
                        <span id="archiveCount">0 wines</span>
                    </div>

                    <!-- Archive Empty State -->
                    <div id="archiveEmptyState" class="archive-empty-state">
                        <span class="archive-empty-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="48" height="48"><path d="M21 8v13H3V8"/><path d="M1 3h22v5H1z"/><path d="M10 12h4"/></svg></span>
                        <p>Your archive is empty</p>
                        <span class="archive-empty-hint">Deleted wines with a rating will appear here</span>
                    </div>

                    <!-- Archive List -->
                    <div id="archiveList" class="archive-list"></div>
                </div>
            </div>
        </div>

        <!-- Archive Detail Modal -->
        <div id="archiveDetailModal" class="modal">
            <div class="modal-content detail-modal">
                <button class="close-btn detail-close" data-close="archiveDetailModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <!-- Hero Section -->
                <div id="archiveDetailHero" class="detail-hero">
                    <div id="archiveDetailHeroContent" class="detail-hero-content"></div>
                    <div class="detail-hero-info">
                        <span id="archiveDetailTypeBadge" class="detail-type-badge">Red</span>
                        <div id="archiveDetailName" class="detail-wine-name">Wine Name</div>
                        <div id="archiveDetailProducer" class="detail-wine-producer">Producer</div>
                        <div id="archiveDetailRegion" class="detail-wine-region">Region, Country</div>
                    </div>
                </div>

                <!-- Content -->
                <div class="detail-content">
                    <!-- Rating, Rebuy & Store -->
                    <div class="archive-rating-display">
                        <div class="rating-stars" id="archiveDetailStars">★★★★★</div>
                        <div class="rebuy-badge" id="archiveDetailRebuy">
                            <span class="rebuy-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="14" height="14"><path d="M14 9V5a3 3 0 00-3-3l-4 9v11h11.28a2 2 0 002-1.7l1.38-9a2 2 0 00-2-2.3H14z"/><path d="M7 22H4a2 2 0 01-2-2v-7a2 2 0 012-2h3"/></svg></span>
                            <span>Rebuy</span>
                        </div>
                        <div id="archiveDetailStoreSection" class="archive-store-badge" style="display:none">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="13" height="13"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
                            <span id="archiveDetailStore">Winkel</span>
                        </div>
                    </div>

                    <div class="detail-facts-row">
                        <div class="detail-fact">
                            <div class="detail-fact-label">Year</div>
                            <div id="archiveDetailYear" class="detail-fact-value">2020</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Grape</div>
                            <div id="archiveDetailGrape" class="detail-fact-value">Cabernet</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Price</div>
                            <div id="archiveDetailPrice" class="detail-fact-value">€25</div>
                        </div>
                    </div>

                    <div class="detail-profile-section">
                        <div class="detail-profile-title">Profile</div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Boldness</span>
                            <div class="detail-bar-track"><div id="archiveDetailBoldness" class="detail-bar-fill boldness"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Tannins</span>
                            <div class="detail-bar-track"><div id="archiveDetailTannins" class="detail-bar-fill tannins"></div></div>
                        </div>
                        <div class="detail-profile-bar">
                            <span class="detail-bar-label">Acidity</span>
                            <div class="detail-bar-track"><div id="archiveDetailAcidity" class="detail-bar-fill acidity"></div></div>
                        </div>
                    </div>

                    <div id="archiveDetailNotesSection" class="detail-notes-section">
                        <div class="detail-notes-label">Notes</div>
                        <div id="archiveDetailNotes" class="detail-notes-text"></div>
                    </div>

                    <div id="archiveDetailReviewSection" class="detail-notes-section archive-review">
                        <div class="detail-notes-label">My Review</div>
                        <div id="archiveDetailReview" class="detail-notes-text"></div>
                        <span class="archive-date" id="archiveDetailDate"></span>
                    </div>

                    <div class="detail-actions">
                        <button id="restoreWineBtn" class="detail-action-btn detail-btn-edit">Restore</button>
                        <button id="deleteArchiveBtn" class="detail-action-btn detail-btn-delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wishlist Modal -->
        <div id="wishlistModal" class="modal">
            <div class="modal-content archive-list-modal">
                <div class="modal-header">
                    <h2>Wishlist</h2>
                    <button class="close-btn" data-close="wishlistModal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="wishlistEmptyState" class="archive-empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48" height="48" style="opacity:0.3;margin-bottom:8px">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <p>Your wishlist is empty</p>
                        <span class="archive-empty-hint">Wines you want to try will appear here</span>
                    </div>
                    <div id="wishlistList" class="archive-list"></div>
                </div>
            </div>
        </div>

        <!-- Wishlist Detail Modal -->
        <div id="wishlistDetailModal" class="modal">
            <div class="modal-content detail-modal">
                <button class="close-btn detail-close" data-close="wishlistDetailModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <div id="wishlistDetailHero" class="detail-hero">
                    <div id="wishlistDetailHeroContent" class="detail-hero-content"></div>
                    <div class="detail-hero-info">
                        <span id="wishlistDetailTypeBadge" class="detail-type-badge">Red</span>
                        <h1 id="wishlistDetailName" class="detail-wine-name">Wine Name</h1>
                        <div id="wishlistDetailProducer" class="detail-wine-producer">Producer</div>
                        <div id="wishlistDetailRegion" class="detail-wine-region">Region</div>
                    </div>
                </div>

                <div class="detail-content">
                    <div class="detail-facts-row">
                        <div class="detail-fact">
                            <div class="detail-fact-label">Year</div>
                            <div id="wishlistDetailYear" class="detail-fact-value">—</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Grape</div>
                            <div id="wishlistDetailGrape" class="detail-fact-value">—</div>
                        </div>
                        <div class="detail-fact">
                            <div class="detail-fact-label">Price</div>
                            <div id="wishlistDetailPrice" class="detail-fact-value">—</div>
                        </div>
                    </div>

                    <div id="wishlistDetailNotesSection" class="detail-notes-section">
                        <div class="detail-notes-label">Notes</div>
                        <div id="wishlistDetailNotes" class="detail-notes-text"></div>
                    </div>

                    <div class="detail-actions">
                        <button id="moveWishlistToCellarBtn" class="detail-action-btn detail-btn-edit">Move to Cellar</button>
                        <button id="deleteWishlistBtn" class="detail-action-btn detail-btn-delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Year Picker Modal -->
        <div id="yearModal" class="modal">
            <div class="modal-content year-modal">
                <div class="year-picker-header">
                    <h2>What year?</h2>
                    <p>Selecteer het vintage jaar</p>
                </div>
                <div class="year-picker-buttons"></div>
                <button class="year-pick-skip">Overslaan</button>
            </div>
        </div>

        <!-- Store Picker Modal -->
        <div id="storeModal" class="modal">
            <div class="modal-content store-modal">
                <div class="store-modal-header">
                    <h2>Where did you buy this?</h2>
                </div>
                <div id="storeModalChips" class="store-chips"></div>
                <div class="store-input-row">
                    <input type="text" id="storeModalInput" class="store-input" placeholder="Store name...">
                    <button class="store-save-btn" id="storeModalSave">Save</button>
                </div>
                <button class="store-discard-btn" id="storeModalDiscard">Not now</button>
            </div>
        </div>

        <!-- Advanced Filter Modal -->
        <div id="advancedFilterModal" class="modal">
            <div class="modal-content advanced-filter-panel">
                <div class="modal-header">
                    <div>
                        <h2>Advanced Filters</h2>
                        <p class="adv-filter-subtitle">Verfijn je selectie</p>
                    </div>
                    <button class="close-btn" id="advancedFilterClose">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M18 6L6 18M6 6l12 12"/></svg>
                    </button>
                </div>
                <div class="modal-body" id="advancedFilterBody">
                    <!-- Dynamically populated by JS: Region, Country, Producer, Vintage, Price Range, Sort -->
                </div>
                <div class="adv-filter-footer">
                    <button class="adv-filter-reset" id="advancedFilterReset">Reset</button>
                    <button class="adv-filter-apply" id="advancedFilterApply">Apply</button>
                </div>
            </div>
        </div>

        <!-- Archive Advanced Filter Modal -->
        <div id="archiveAdvancedModal" class="modal">
            <div class="modal-content advanced-filter-panel">
                <div class="modal-header">
                    <div>
                        <h2>Advanced Filters</h2>
                        <p class="adv-filter-subtitle">Verfijn je archief selectie</p>
                    </div>
                    <button class="close-btn" id="archiveAdvancedClose">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M18 6L6 18M6 6l12 12"/></svg>
                    </button>
                </div>
                <div class="modal-body" id="archiveAdvancedBody">
                    <!-- Dynamically populated: Rebuy, Region, Country, Producer, Vintage, Price Range, Sort -->
                </div>
                <div class="adv-filter-footer">
                    <button class="adv-filter-reset" id="archiveAdvancedReset">Reset</button>
                    <button class="adv-filter-apply" id="archiveAdvancedApply">Apply</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast">
            <span id="toastMessage"></span>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <script src="config.js?v=89"></script>
    <script src="app.js?v=89"></script>
</body>
</html>
